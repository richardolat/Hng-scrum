import Progress from "@/shared/components/Progress";
import thousandsSeperator from "@/shared/utilities/thousandsSeparator";

const ProgressBar = ({ raised, expected }: { raised: number; expected: number }) => {
  return (
    <div className="mt-24 xl:hidden" style={{ width: "min(950px, 100vw)" }}>
      <Progress
        className="progress-primary bg-neutral-100 h-7"
        value={raised}
        total={expected}
        Label={({ percentage }) => <ProgressLabel percentage={percentage} />}
      >
        <div className="absolute top-10 text-4xl sm:text-base font-bold font-title black-1 text-neutral-100">
          Raised ${thousandsSeperator(raised)}
        </div>

        <div className="absolute p-4 bg-neutral-100 rounded-2xl right-0 sm:text-base font-bold font-title text-primary-600 text-5xl">
          <div className="flex items-center gap-3 absolute -top-14 text-neutral-100">
            <AuctionGoal /> Goal
          </div>
          <span>${thousandsSeperator(expected)}</span>
        </div>
      </Progress>
    </div>
  );
};

const ProgressLabel = ({ percentage }: { percentage: number }) => {
  let left = percentage;
  // if (left > 78) left = 78;

  return (
    <div className={`flex justify-center items-center text-primary-100 absolute -top-8`} style={{ left: left + "%" }}>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        className="absolute"
        width="50"
        height="50"
        viewBox="0 0 37 38"
        fill="none"
      >
        <path
          d="M12.6836 30.2899H6.90136C5.36781 30.2899 3.89707 29.6449 2.81269 28.4967C1.7283 27.3485 1.1191 25.7913 1.1191 24.1675V7.84115C1.1191 6.21739 1.7283 4.66013 2.81269 3.51196C3.89707 2.36379 5.36781 1.71875 6.90136 1.71875H30.0304C31.564 1.71875 33.0347 2.36379 34.1191 3.51196C35.2035 4.66013 35.8127 6.21739 35.8127 7.84115V24.1675C35.8127 25.7913 35.2035 27.3485 34.1191 28.4967C33.0347 29.6449 31.564 30.2899 30.0304 30.2899H24.2481L18.4659 36.4123L12.6836 30.2899Z"
          stroke="currentColor"
          strokeWidth="1.82598"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </svg>
      <span className="absolute -mt-1 text-lg font-title font-bold text-primary-600">{percentage}%</span>
    </div>
  );
};

const AuctionGoal = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width={49} height={48} viewBox="0 0 49 48" fill="none">
    <path
      d="M37.122 13.25H37.0184L36.9452 13.3232L27.8132 22.4512L27.6974 22.5669L27.7572 22.7193C28.0508 23.4674 28.0778 24.2938 27.8337 25.0595C27.5896 25.8252 27.0893 26.4834 26.4169 26.9236C25.7446 27.3638 24.9411 27.5591 24.1417 27.4765C23.3423 27.394 22.5957 27.0387 22.0275 26.4705C21.4592 25.9022 21.104 25.1556 21.0214 24.3562C20.9389 23.5568 21.1341 22.7534 21.5743 22.081C22.0145 21.4087 22.6728 20.9084 23.4385 20.6643C24.2042 20.4202 25.0305 20.4472 25.7786 20.7407L25.931 20.8005L26.0467 20.6848L35.1767 11.5548L35.25 11.4816V11.378V7.6561C35.25 7.65606 35.25 7.65603 35.25 7.656C35.2501 7.22422 35.4216 6.81016 35.7268 6.50469L39.1867 3.04478L39.1877 3.04378C39.2195 3.0116 39.2596 2.98873 39.3035 2.97767C39.3474 2.96661 39.3934 2.96777 39.4367 2.98103L39.4367 2.98105L39.4399 2.98197C39.5257 3.00705 39.5923 3.07929 39.6107 3.17251L39.6108 3.17301L40.5308 7.77501L40.5635 7.93846L40.7269 7.97115L45.3269 8.89115C45.4181 8.90937 45.4908 8.97577 45.516 9.06211L45.5167 9.06466C45.5299 9.10789 45.531 9.15387 45.5201 9.19772C45.5092 9.24145 45.4867 9.28142 45.455 9.31341C45.4549 9.31349 45.4548 9.31358 45.4547 9.31366L41.9932 12.7732L41.993 12.7734C41.8422 12.9244 41.6631 13.0443 41.4659 13.1261C41.2688 13.2079 41.0574 13.25 40.844 13.25C40.844 13.25 40.8439 13.25 40.8439 13.25H37.122Z"
      fill="#F3F4F8"
      stroke="#DD424C"
      strokeWidth="0.5"
    />
    <path
      d="M24.5 2.50001L24.5002 2.50001L24.5 5.25001V5.00001C24.4999 5.00001 24.4999 5.00001 24.4998 5.00001C19.4607 5.00007 14.6281 7.00184 11.065 10.565C7.50178 14.1282 5.5 18.9609 5.5 24C5.5 29.0391 7.50178 33.8718 11.065 37.435C14.6282 40.9982 19.4609 43 24.5 43C26.9951 43 29.4658 42.5086 31.771 41.5537C34.0762 40.5989 36.1707 39.1994 37.935 37.435C39.6993 35.6707 41.0989 33.5762 42.0537 31.271C43.0086 28.9658 43.5 26.4951 43.5 24C43.5 22.1822 43.2452 20.4245 42.7696 18.7617C42.6932 18.4488 42.7406 18.1183 42.9019 17.8394C43.064 17.5592 43.3284 17.3528 43.6396 17.2636C43.9507 17.1744 44.2843 17.2094 44.5702 17.3612C44.8548 17.5124 45.07 17.7676 45.171 18.0735C45.7118 19.9579 46 21.9452 46 24C46 35.8739 36.3739 45.5 24.5 45.5C12.6261 45.5 3 35.8739 3 24C3 12.1261 12.6261 2.50001 24.5 2.50001Z"
      fill="#F3F4F8"
      stroke="#DD424C"
      strokeWidth="0.5"
    />
    <path
      d="M14.5 24L14.5 24.0011C14.5057 25.3597 14.7883 26.7029 15.3304 27.9486C15.8726 29.1944 16.663 30.3166 17.6533 31.2467C18.6437 32.1768 19.8132 32.8953 21.0905 33.3584C22.3678 33.8214 23.726 34.0193 25.0823 33.9398C26.4386 33.8604 27.7645 33.5054 28.9791 32.8964C30.1936 32.2875 31.2712 31.4374 32.1463 30.3981C33.0213 29.3587 33.6753 28.1519 34.0683 26.8514C34.4614 25.5509 34.5853 24.1839 34.4324 22.8339L34.4326 22.8339L34.4309 22.8231C34.3959 22.6011 34.4217 22.3737 34.5054 22.1651C34.5891 21.9565 34.7277 21.7745 34.9064 21.6382C35.0852 21.502 35.2975 21.4166 35.5208 21.3912C35.7441 21.3658 35.9702 21.4012 36.175 21.4938L36.1761 21.4943C36.5946 21.681 36.8761 22.0791 36.9128 22.536L36.9126 22.536L36.9137 22.5453C37.2181 25.1242 36.7116 27.7339 35.4645 30.0116C34.2173 32.2894 32.2916 34.122 29.9549 35.2548C27.6181 36.3875 24.9866 36.7642 22.4259 36.3324C19.8653 35.9005 17.5028 34.6817 15.6668 32.8453L15.6667 32.8452C13.8312 31.0107 12.612 28.6505 12.1783 26.092C11.7446 23.5334 12.1178 20.9033 13.2461 18.5664C14.3745 16.2295 16.2021 14.3016 18.4755 13.0502C20.7489 11.7988 23.3553 11.2858 25.9334 11.5824L25.9334 11.5824L25.9389 11.5829C26.1045 11.5983 26.2655 11.6466 26.4122 11.725C26.559 11.8033 26.6886 11.9102 26.7935 12.0393C26.8984 12.1685 26.9765 12.3172 27.0232 12.4769C27.0699 12.6366 27.0842 12.804 27.0653 12.9693C27.0465 13.1346 26.9948 13.2945 26.9134 13.4395C26.8319 13.5846 26.7223 13.712 26.591 13.8141C26.4597 13.9163 26.3093 13.9912 26.1487 14.0345C25.9881 14.0778 25.8204 14.0886 25.6555 14.0663L25.6555 14.0662L25.6507 14.0657C24.2497 13.9037 22.8303 14.0398 21.4857 14.4651C20.1411 14.8904 18.9016 15.5953 17.8486 16.5334C16.7956 17.4715 15.9528 18.6218 15.3757 19.9086C14.7986 21.1954 14.5002 22.5897 14.5 24Z"
      fill="#F3F4F8"
      stroke="#DD424C"
      strokeWidth="0.5"
    />
  </svg>
);

export default ProgressBar;
